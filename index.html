<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Geschiedenis Toetstrainer â€“ Tijdvak 1 & 2</title>
  <style>
    :root {
      --bg1:#f8fafc; --bg2:#eef2ff; --ink:#0f172a; --muted:#64748b; --brand:#2563eb; --brand2:#4f46e5; --ok:#10b981; --bad:#ef4444;
      font-family:'Inter',system-ui,Segoe UI,Roboto,Arial,sans-serif;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--ink)}
    .wrap{max-width:1100px;margin:auto;padding:20px}
    header{display:flex;flex-wrap:wrap;justify-content:space-between;gap:16px;align-items:flex-start;margin-bottom:10px}
    h1{margin:0;font-size:clamp(22px,3.2vw,36px);font-weight:900}
    .muted{color:var(--muted)}
    .pill{display:inline-flex;gap:.4rem;align-items:center;border:1px solid #e2e8f0;background:#fff;border-radius:999px;padding:.25rem .6rem;font-size:.8rem;box-shadow:0 1px 0 rgba(0,0,0,.04)}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:18px;box-shadow:0 10px 30px rgba(2,6,23,.06);padding:18px}
    nav.tabs{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:8px;margin:14px 0}
    .btn{appearance:none;border:2px solid #e5e7eb;background:#fff;color:var(--ink);padding:10px 12px;border-radius:12px;font-weight:700;cursor:pointer;transition:.15s}
    .btn:hover{transform:translateY(-1px)}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .btn.ghost{background:#f8fafc}
    .hidden{display:none}
    .grid{display:grid;gap:14px}
    @media(min-width:800px){.g2{grid-template-columns:1fr 1fr}}
    .progress{height:8px;border-radius:999px;background:#e5e7eb;overflow:hidden}
    .progress>i{display:block;height:100%;background:linear-gradient(90deg,var(--brand),var(--brand2));width:0}
    /* Stepper */
    .stepper{display:flex;gap:8px;flex-wrap:wrap}
    .step{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:12px;border:1px solid #e5e7eb;background:#fff}
    .step.active{border-color:var(--brand);box-shadow:0 0 0 3px rgba(37,99,235,.12)}
    .dot{width:22px;height:22px;border-radius:999px;display:grid;place-items:center;font-weight:800;border:2px solid #e5e7eb}
    .step.active .dot{border-color:var(--brand);color:var(--brand)}
    .ok{color:var(--ok)}
    .bad{color:var(--bad)}
    .flashQ{font-size:1.15rem;font-weight:800;text-align:center;border:1px solid #e5e7eb;border-radius:14px;padding:14px}
    .answer{margin-top:8px;border:1px solid #e5e7eb;background:#f8fafc;border-radius:12px;padding:12px}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{border:1px solid #e5e7eb;padding:8px;text-align:left}
    .table th{background:#f8fafc}
    .hint{font-size:.9rem;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Geschiedenis Toetstrainer â€” Tijdvak 1 & 2</h1>
        <div class="muted">Interactief leren met een **logische leerlijn**: overzicht â†’ flashcards â†’ deeltoetsen â†’ eindtoets.</div>
        <div style="margin-top:6px;display:flex;gap:6px;flex-wrap:wrap">
          <span class="pill">â±ï¸ 1â€‘uurs plan</span>
          <span class="pill">ğŸ§  Actief herinneren</span>
          <span class="pill">ğŸ Eindtoets</span>
        </div>
      </div>
      <div class="card" style="min-width:260px">
        <div style="display:flex;justify-content:space-between"><div class="muted">Sessieâ€‘timer</div><div id="clock" style="font-family:ui-monospace,Menlo,monospace;font-weight:800">60:00</div></div>
        <div class="progress" style="margin:8px 0"><i id="bar"></i></div>
        <div style="display:flex;gap:8px"><button class="btn primary" id="start">Start</button><button class="btn" id="reset">Reset</button></div>
      </div>
    </header>

    <!-- STEPPER -->
    <div class="card">
      <div class="stepper" id="stepper"></div>
      <div class="hint" style="margin-top:8px">Doorloop elke stap. De <b>Volgende</b>-knop wordt actief als je de stap afrondt.</div>
    </div>

    <!-- NAV -->
    <nav class="tabs">
      <button class="btn primary" data-tab="overview">ğŸ“š Overzicht</button>
      <button class="btn" data-tab="t1">ğŸŒ¾ Tijdvak 1</button>
      <button class="btn" data-tab="quiz1">ğŸ§ª Deels toets T1</button>
      <button class="btn" data-tab="t2">ğŸ›ï¸ Tijdvak 2</button>
      <button class="btn" data-tab="quiz2">ğŸ§ª Deels toets T2</button>
      <button class="btn" data-tab="mix">ğŸ”€ Mix-oefening</button>
      <button class="btn" data-tab="final">ğŸ Eindtoets</button>
    </nav>

    <!-- PANES -->
    <section class="card" id="tab-overview">
      <h2>ğŸ“š Overzicht van de tijdvakken</h2>
      <table class="table"><thead><tr><th>#</th><th>Naam</th><th>Jaartallen</th><th>Kern</th></tr></thead><tbody id="tv-body"></tbody></table>
      <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end">
        <button class="btn" id="next-overview" disabled>Volgende â–·</button>
      </div>
    </section>

    <section class="card hidden" id="tab-t1">
      <h2>ğŸŒ¾ Tijdvak 1 â€“ Jagers en boeren</h2>
      <div class="grid g2">
        <div>
          <h3>Kern</h3>
          <ul>
            <li>Nomadisch â†’ kleine groepen; afhankelijk van natuur.</li>
            <li>Landbouwrevolutie (ca. 10.000 v.Chr.) â†’ sedentaire samenleving.</li>
            <li>Overschotten â†’ specialisatie â†’ handel â†’ sociale gelaagdheid.</li>
            <li>Ontstaan dorpen/steden; schrift (ca. 3000 v.Chr.) â†’ einde prehistorie.</li>
          </ul>
          <div class="hint">Doel: 5/5 flashcards doorlopen.</div>
        </div>
        <div>
          <div class="flashQ" id="fc1-q">Nomadisch</div>
          <div class="answer hidden" id="fc1-a">Rondtrekkend leven; geen vaste woonplaats.</div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn" id="fc1-show">Toon antwoord</button>
            <button class="btn primary" id="fc1-next">Volgende kaart</button>
          </div>
          <div class="muted" id="fc1-count" style="margin-top:6px">1 / 5</div>
        </div>
      </div>
      <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end">
        <button class="btn" id="next-t1" disabled>Volgende â–·</button>
      </div>
    </section>

    <section class="card hidden" id="tab-quiz1">
      <h2>ğŸ§ª Deels toets Tijdvak 1</h2>
      <div id="q1"></div>
      <div style="display:flex;gap:8px;margin-top:10px"><button class="btn primary" id="q1-check">Check</button><button class="btn" id="q1-next">Volgende vraag</button></div>
      <div id="q1-feedback" class="card hidden" style="margin-top:10px"></div>
      <div class="hint" id="q1-progress">Vraag 1 / 6 Â· Score 0</div>
      <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end"><button class="btn" id="next-quiz1" disabled>Volgende â–·</button></div>
    </section>

    <section class="card hidden" id="tab-t2">
      <h2>ğŸ›ï¸ Tijdvak 2 â€“ Grieken en Romeinen</h2>
      <div class="grid g2">
        <div>
          <h3>Kern</h3>
          <ul>
            <li>Grieken: polis, democratie (Athene), filosofie (Socrates, Plato, Aristoteles).</li>
            <li>Romeinen: groei imperium, romanisering, Pax Romana, recht & infrastructuur.</li>
            <li>Kunst: klassieke vormentaal (zuilen); Romeinen: bogen/koepels.</li>
            <li>Religie: polytheÃ¯sme â†’ monotheÃ¯sme (jodendom/christendom).</li>
          </ul>
          <div class="hint">Doel: 7/7 flashcards doorlopen.</div>
        </div>
        <div>
          <div class="flashQ" id="fc2-q">Polis</div>
          <div class="answer hidden" id="fc2-a">Griekse stadstaat met eigen bestuur en wetten.</div>
          <div style="display:flex;gap:8px;margin-top:8px"><button class="btn" id="fc2-show">Toon antwoord</button><button class="btn primary" id="fc2-next">Volgende kaart</button></div>
          <div class="muted" id="fc2-count" style="margin-top:6px">1 / 7</div>
        </div>
      </div>
      <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end"><button class="btn" id="next-t2" disabled>Volgende â–·</button></div>
    </section>

    <section class="card hidden" id="tab-quiz2">
      <h2>ğŸ§ª Deels toets Tijdvak 2</h2>
      <div id="q2"></div>
      <div style="display:flex;gap:8px;margin-top:10px"><button class="btn primary" id="q2-check">Check</button><button class="btn" id="q2-next">Volgende vraag</button></div>
      <div id="q2-feedback" class="card hidden" style="margin-top:10px"></div>
      <div class="hint" id="q2-progress">Vraag 1 / 8 Â· Score 0</div>
      <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end"><button class="btn" id="next-quiz2" disabled>Volgende â–·</button></div>
    </section>

    <section class="card hidden" id="tab-mix">
      <h2>ğŸ”€ Mix-oefening (T1 + T2 door elkaar)</h2>
      <div id="qmix"></div>
      <div style="display:flex;gap:8px;margin-top:10px"><button class="btn primary" id="qmix-check">Check</button><button class="btn" id="qmix-next">Volgende vraag</button></div>
      <div id="qmix-feedback" class="card hidden" style="margin-top:10px"></div>
      <div class="hint" id="qmix-progress">Vraag 1 / 8 Â· Score 0</div>
      <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end"><button class="btn" id="next-mix" disabled>Volgende â–·</button></div>
    </section>

    <section class="card hidden" id="tab-final">
      <h2>ğŸ Eindtoets (10 vragen)</h2>
      <div id="qfinal"></div>
      <div style="display:flex;gap:8px;margin-top:10px"><button class="btn primary" id="qfinal-check">Check</button><button class="btn" id="qfinal-next">Volgende vraag</button></div>
      <div id="qfinal-feedback" class="card hidden" style="margin-top:10px"></div>
      <div class="hint" id="qfinal-progress">Vraag 1 / 10 Â· Score 0</div>
      <div id="final-summary" class="card hidden" style="margin-top:12px"></div>
    </section>

    <footer class="muted" style="text-align:center;margin-top:18px">Tip: haal 70% of hoger per stap en ga dan door. Herhaal je fouten aan het einde. ğŸ’ª</footer>
  </div>

<script>
// ---------- TIMER ----------
let secs=3600, timer=null; const clock=document.getElementById('clock'); const bar=document.getElementById('bar');
function renderTime(){const m=String(Math.floor(secs/60)).padStart(2,'0'); const s=String(secs%60).padStart(2,'0'); clock.textContent=`${m}:${s}`; bar.style.width=`${100-(secs/3600)*100}%`;}
renderTime();
document.getElementById('start').onclick=()=>{ if(timer) return; timer=setInterval(()=>{ if(secs>0){secs--;renderTime()} },1000)};
document.getElementById('reset').onclick=()=>{clearInterval(timer); timer=null; secs=3600; renderTime();};

// ---------- NAV ----------
const tabs=['overview','t1','quiz1','t2','quiz2','mix','final'];
const buttons=[...document.querySelectorAll('nav.tabs .btn')];
function showTab(name){tabs.forEach(t=>document.getElementById('tab-'+t).classList.add('hidden')); document.getElementById('tab-'+name).classList.remove('hidden'); buttons.forEach(b=>b.classList.toggle('primary', b.dataset.tab===name));}
buttons.forEach(b=>b.addEventListener('click',()=>showTab(b.dataset.tab)));

// ---------- STEPPER ----------
const steps=[
  {key:'overview', label:'Overzicht'},
  {key:'t1', label:'Flashcards T1'},
  {key:'quiz1', label:'Deeltoets T1'},
  {key:'t2', label:'Flashcards T2'},
  {key:'quiz2', label:'Deeltoets T2'},
  {key:'mix', label:'Mix-oefening'},
  {key:'final', label:'Eindtoets'}
];
let currentStep=0; const stepper=document.getElementById('stepper');
function renderStepper(){ stepper.innerHTML=''; steps.forEach((s,i)=>{ const el=document.createElement('div'); el.className='step'+(i===currentStep?' active':''); el.innerHTML=`<span class="dot">${i+1}</span> ${s.label}`; stepper.appendChild(el);}); }
renderStepper();
function gotoStep(i){ currentStep=i; showTab(steps[i].key); renderStepper(); }

// ---------- Overzicht tabel ----------
const tijdvakken=[
  {nr:1,naam:'Jagers en boeren',jaren:'tot 3000 v.Chr.',kern:'Landbouw, dorpen, eerste steden'},
  {nr:2,naam:'Grieken en Romeinen',jaren:'3000 v.Chr. â€“ 500 n.Chr.',kern:'Democratie, wetenschap, Romeins rijk'},
  {nr:3,naam:'Monniken en ridders',jaren:'500 â€“ 1000',kern:'Christendom, leenstelsel, hofstelsel'},
  {nr:4,naam:'Steden en staten',jaren:'1000 â€“ 1500',kern:'Handel, steden, macht van koningen en kerk'},
  {nr:5,naam:'Ontdekkers en hervormers',jaren:'1500 â€“ 1600',kern:'Renaissance, ontdekkingsreizen, Reformatie'},
  {nr:6,naam:'Regenten en vorsten',jaren:'1600 â€“ 1700',kern:'Absolutisme, Gouden Eeuw'},
  {nr:7,naam:'Pruiken en revoluties',jaren:'1700 â€“ 1800',kern:'Verlichting, revoluties'},
  {nr:8,naam:'Burgers en stoommachines',jaren:'1800 â€“ 1900',kern:'Industrialisatie'},
  {nr:9,naam:'Wereldoorlogen',jaren:'1900 â€“ 1950',kern:'WO I & II, Holocaust'},
  {nr:10,naam:'Televisie en computer',jaren:'1950 â€“ nu',kern:'Informatietijdperk, globalisering'}
];
const tvBody=document.getElementById('tv-body'); tijdvakken.forEach(t=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${t.nr}</td><td>${t.naam}</td><td>${t.jaren}</td><td>${t.kern}</td>`; tvBody.appendChild(tr);});
// active review requirement: scroll table then enable next
const nextOverview=document.getElementById('next-overview'); let viewed=false; document.getElementById('tab-overview').addEventListener('scroll',()=>{ viewed=true; nextOverview.removeAttribute('disabled');}); setTimeout(()=>{nextOverview.removeAttribute('disabled')},4000);
nextOverview.onclick=()=>{gotoStep(1)};

// ---------- Flashcards ----------
function makeFlash(deck,qEl,aEl,nextBtn,showBtn,countEl,doneCb){ let i=0,show=false; function render(){ qEl.textContent=deck[i].q; aEl.textContent=deck[i].a; aEl.classList.toggle('hidden',!show); countEl.textContent=`${i+1} / ${deck.length}`; }
  nextBtn.onclick=()=>{ if(i<deck.length-1){ i++; show=false; render(); } else { doneCb(); }};
  showBtn.onclick=()=>{ show=!show; render(); };
  render(); }
const deck1=[
  {q:'Nomadisch',a:'Rondtrekkend leven; geen vaste woonplaats.'},
  {q:'Sedentair',a:'Op Ã©Ã©n plek wonen (na de landbouw).'},
  {q:'Landbouwrevolutie',a:'Overgang van jagen/verzamelen naar landbouw en veeteelt (ca. 10.000 v.Chr.).'},
  {q:'Sociale gelaagdheid',a:'Verschillen in macht en rijkdom tussen groepen.'},
  {q:'Einde prehistorie',a:'Rond 3000 v.Chr. met het ontstaan van het schrift.'}
];
makeFlash(deck1, document.getElementById('fc1-q'), document.getElementById('fc1-a'), document.getElementById('fc1-next'), document.getElementById('fc1-show'), document.getElementById('fc1-count'), ()=>{ document.getElementById('next-t1').removeAttribute('disabled'); });

const deck2=[
  {q:'Polis',a:'Griekse stadstaat met eigen bestuur, leger en wetten.'},
  {q:'Democratie (Athene)',a:'Vrije mannen met Atheense ouders beslissen in de volksvergadering.'},
  {q:'Filosofie / wetenschappelijk denken',a:'Met rede en logica verklaringen zoeken (Socrates, Plato, Aristoteles).'},
  {q:'Romanisering',a:'Verspreiding van Romeinse taal/cultuur/recht door veroveringen en contact.'},
  {q:'Pax Romana',a:'Lange periode van vrede en welvaart in het Romeinse rijk.'},
  {q:'PolytheÃ¯sme â†” MonotheÃ¯sme',a:'Veel goden â†” Ã©Ã©n God (jodendom/christendom).'},
  {q:'Byzantijnse Rijk',a:'Oostâ€‘Romeinse rijk met hoofdstad Constantinopel.'}
];
makeFlash(deck2, document.getElementById('fc2-q'), document.getElementById('fc2-a'), document.getElementById('fc2-next'), document.getElementById('fc2-show'), document.getElementById('fc2-count'), ()=>{ document.getElementById('next-t2').removeAttribute('disabled'); });

document.getElementById('next-t1').onclick=()=>{gotoStep(2)};
document.getElementById('next-t2').onclick=()=>{gotoStep(4)};

// ---------- Question render helpers ----------
function renderOpen(container, text){ container.innerHTML=`<div class='flashQ'>${text}</div><input id='ans' class='btn' style='width:100%;margin-top:8px' placeholder='Typ je antwoord in 1 zin'>`; }
function renderMC(container, text, opts){ const buttons = opts.map((o,i)=>`<button class='btn' data-i='${i}' style='display:block;width:100%;margin:6px 0'>${String.fromCharCode(65+i)}. ${o}</button>`).join(''); container.innerHTML=`<div class='flashQ'>${text}</div>${buttons}`; }
function checkOpen(regex){ const v=document.getElementById('ans').value||''; return regex.test(v); }
function pick(arr){ return arr[Math.floor(Math.random()*arr.length)] }

// ---------- Deeltoets T1 ----------
const q1Bank=[
  {kind:'open', t:'Wat was de landbouwrevolutie?', check:/landbouw|overgang|veeteelt/i, exp:'Overgang van jagen/verzamelen naar landbouw en veeteelt; vaste woonplaatsen en overschotten.'},
  {kind:'mc', t:'Wat betekent â€œsedentairâ€?', opts:['Rondtrekken','Op Ã©Ã©n plek wonen','In tenten wonen','In grotten wonen'], ans:1, exp:'Sedentair = vaste woonplaats.'},
  {kind:'open', t:'Noem Ã©Ã©n gevolg van landbouw.', check:/dorpen|steden|overschot|specialisatie|handel|schrift|bevolking/i, exp:'Overschotten â†’ specialisatie, handel, bevolkingsgroei, dorpen/steden, schrift.'},
  {kind:'mc', t:'Wat markeert het einde van de prehistorie?', opts:['Ontstaan landbouw','Uitvinding schrift','Ontstaan steden','Ontdekking metaal'], ans:1, exp:'Rond 3000 v.Chr. met het schrift.'},
  {kind:'mc', t:'Waarom leefden jagers-verzamelaars in kleine groepen?', opts:['Religie','Meer veiligheid','Makkelijker voedsel vinden','Om handel te drijven'], ans:2, exp:'Kleine groepen konden makkelijker trekken en voedsel vinden.'},
  {kind:'open', t:'Leg â€œnomadischâ€ uit.', check:/rond?trekk|geen vaste/i, exp:'Nomadisch = rondtrekken, geen vaste woonplaats.'}
];
let q1i=0,q1score=0; const q1c=document.getElementById('q1'); const q1fb=document.getElementById('q1-feedback'); const q1prog=document.getElementById('q1-progress');
function renderQ1(){ const q=q1Bank[q1i]; if(q.kind==='open'){renderOpen(q1c,q.t)} else {renderMC(q1c,q.t,q.opts); [...q1c.querySelectorAll('button[data-i]')].forEach(b=>b.onclick=()=>{ q1c.dataset.choice=b.dataset.i; [...q1c.querySelectorAll('button[data-i]')].forEach(x=>x.classList.toggle('primary',x===b)); }); } q1fb.classList.add('hidden'); q1prog.textContent=`Vraag ${q1i+1} / ${q1Bank.length} Â· Score ${q1score}`; }
renderQ1();
document.getElementById('q1-check').onclick=()=>{ const q=q1Bank[q1i]; let ok=false; if(q.kind==='open'){ ok = checkOpen(q.check); } else { ok = Number(q1c.dataset.choice)==q.ans; }
  if(ok) q1score++; q1fb.className='card '+(ok?'ok':'bad'); q1fb.textContent=(ok?'âœ… Goed! ':'âŒ Bijnaâ€¦ ')+q.exp; q1fb.classList.remove('hidden'); q1prog.textContent=`Vraag ${q1i+1} / ${q1Bank.length} Â· Score ${q1score}`; };
document.getElementById('q1-next').onclick=()=>{ if(q1i<q1Bank.length-1){ q1i++; delete q1c.dataset.choice; renderQ1(); } else { document.getElementById('next-quiz1').removeAttribute('disabled'); }};
document.getElementById('next-quiz1').onclick=()=>{gotoStep(3)};

// ---------- Deeltoets T2 ----------
const q2Bank=[
  {kind:'mc', t:'Wie zijn beroemde Griekse filosofen?', opts:['Herodotus, Caesar, Augustus','Socrates, Plato, Aristoteles','Pericles, Spartacus, Jezus','Leonardo, Michelangelo, Raphael'], ans:1, exp:'Socrates, Plato en Aristoteles.'},
  {kind:'open', t:'Wat betekent romanisering?', check:/Romeins|taal|cultuur|recht|verspreiding/i, exp:'Overname/verspreiding van Romeinse taal, cultuur en recht.'},
  {kind:'mc', t:'Wat was de Pax Romana?', opts:['Religieus feest','Periode van vrede en welvaart','Burgeroorlog','Val van het rijk'], ans:1, exp:'Vrede en welvaart bevorderden handel en verspreiding.'},
  {kind:'mc', t:'Wat is een polis?', opts:['Romeinse provincie','Griekse stadstaat','Egyptische tempel','Germaans dorp'], ans:1, exp:'Polis = stadstaat.'},
  {kind:'open', t:'Waarom zagen Romeinen het christendom eerst als bedreiging?', check:/weigerden|keizer|vereren|Ã©Ã©n god|monotheÃ¯sme/i, exp:'Christenen vereerden Ã©Ã©n God en weigerden de keizer te vereren.'},
  {kind:'mc', t:'Wat verspreidde zich via het Romeinse rijk?', opts:['Grieksâ€‘Romeinse cultuur','Islam','Perzische cultuur','Germaanse kunst'], ans:0, exp:'Romanisering = verspreiding Grieksâ€‘Romeinse cultuur.'},
  {kind:'mc', t:'Welke bouwstijl hoort bij de Grieken?', opts:['Gotisch','Barok','Klassiek (zuilen)','Renaissance'], ans:2, exp:'Klassieke vormentaal met zuilen.'},
  {kind:'open', t:'Leg â€œmonotheÃ¯smeâ€ uit.', check:/Ã©Ã©n god|1 god/i, exp:'Geloof in Ã©Ã©n God.'}
];
let q2i=0,q2score=0; const q2c=document.getElementById('q2'); const q2fb=document.getElementById('q2-feedback'); const q2prog=document.getElementById('q2-progress');
function renderQ2(){ const q=q2Bank[q2i]; if(q.kind==='open'){renderOpen(q2c,q.t)} else {renderMC(q2c,q.t,q.opts); [...q2c.querySelectorAll('button[data-i]')].forEach(b=>b.onclick=()=>{ q2c.dataset.choice=b.dataset.i; [...q2c.querySelectorAll('button[data-i]')].forEach(x=>x.classList.toggle('primary',x===b)); }); } q2fb.classList.add('hidden'); q2prog.textContent=`Vraag ${q2i+1} / ${q2Bank.length} Â· Score ${q2score}`; }
renderQ2();
document.getElementById('q2-check').onclick=()=>{ const q=q2Bank[q2i]; let ok=false; if(q.kind==='open'){ ok = checkOpen(q.check); } else { ok = Number(q2c.dataset.choice)==q.ans; }
  if(ok) q2score++; q2fb.className='card '+(ok?'ok':'bad'); q2fb.textContent=(ok?'âœ… Goed! ':'âŒ Bijnaâ€¦ ')+q.exp; q2fb.classList.remove('hidden'); q2prog.textContent=`Vraag ${q2i+1} / ${q2Bank.length} Â· Score ${q2score}`; };
document.getElementById('q2-next').onclick=()=>{ if(q2i<q2Bank.length-1){ q2i++; delete q2c.dataset.choice; renderQ2(); } else { document.getElementById('next-quiz2').removeAttribute('disabled'); }};
document.getElementById('next-quiz2').onclick=()=>{gotoStep(5)};

// ---------- Mix ----------
const mixBank=[
  {kind:'mc', t:'Wanneer eindigt de prehistorie?', opts:['3000 v.Chr.','500 n.Chr.','1500 n.Chr.','1950'], ans:0, exp:'Rond 3000 v.Chr. door het schrift.'},
  {kind:'open', t:'Keten: landbouw â†’ ____ â†’ steden. Vul in.', check:/overschot|voedseloverschot|specialisatie/i, exp:'Landbouw â†’ overschot â†’ specialisatie â†’ steden.'},
  {kind:'mc', t:'Wat hoort bij Athene?', opts:['Keizerrijk','Democratie','Pausdom','Feodalisme'], ans:1, exp:'Athene = democratie.'},
  {kind:'mc', t:'Wat betekent romanisering?', opts:['Germanen nemen Romeinse cultuur over','Romeinen nemen Germaanse cultuur over','Grieken nemen Rome over','Egyptenaren nemen Grieks over'], ans:0, exp:'Veroverde volkeren nemen Romeinse cultuur over.'},
  {kind:'open', t:'Noem Ã©Ã©n kenmerk van Griekse bouwkunst.', check:/zuil|dorisch|ionisch|korinthisch/i, exp:'Zuilen: Dorisch, Ionisch, Korinthisch.'},
  {kind:'mc', t:'Waarom leefden jagers-verzamelaars nomadisch?', opts:['Klimaat & voedsel volgen','Religie','Politiek','Handel'], ans:0, exp:'Ze volgden her en der voedsel en dieren.'},
  {kind:'open', t:'Leg â€œsedentairâ€ uit in 4 woorden.', check:/op.*Ã©Ã©n.*plek|vaste.*woon/i, exp:'Op Ã©Ã©n plek wonen (vaste woonplaats).'},
  {kind:'mc', t:'Welke factor hielp de verspreiding van het christendom?', opts:['Burgeroorlogen','Pax Romana & wegen','Slavernij','Kruistochten'], ans:1, exp:'Rust en wegen van Romeinse rijk.'}
];
let mixI=0,mixScore=0; const mixC=document.getElementById('qmix'); const mixFb=document.getElementById('qmix-feedback'); const mixProg=document.getElementById('qmix-progress');
function renderMix(){ const q=mixBank[mixI]; if(q.kind==='open'){renderOpen(mixC,q.t)} else {renderMC(mixC,q.t,q.opts); [...mixC.querySelectorAll('button[data-i]')].forEach(b=>b.onclick=()=>{ mixC.dataset.choice=b.dataset.i; [...mixC.querySelectorAll('button[data-i]')].forEach(x=>x.classList.toggle('primary',x===b)); }); } mixFb.classList.add('hidden'); mixProg.textContent=`Vraag ${mixI+1} / ${mixBank.length} Â· Score ${mixScore}`; }
renderMix();
document.getElementById('qmix-check').onclick=()=>{ const q=mixBank[mixI]; let ok=false; if(q.kind==='open'){ ok = checkOpen(q.check); } else { ok = Number(mixC.dataset.choice)==q.ans; }
  if(ok) mixScore++; mixFb.className='card '+(ok?'ok':'bad'); mixFb.textContent=(ok?'âœ… Goed! ':'âŒ Bijnaâ€¦ ')+q.exp; mixFb.classList.remove('hidden'); mixProg.textContent=`Vraag ${mixI+1} / ${mixBank.length} Â· Score ${mixScore}`; };
document.getElementById('qmix-next').onclick=()=>{ if(mixI<mixBank.length-1){ mixI++; delete mixC.dataset.choice; renderMix(); } else { document.getElementById('next-mix').removeAttribute('disabled'); }};
document.getElementById('next-mix').onclick=()=>{gotoStep(6)};

// ---------- Eindtoets ----------
const finalBank=[
  {kind:'mc', t:'Wat markeert het einde van de prehistorie?', opts:['Ontstaan landbouw','Uitvinding schrift','Ontstaan steden','Uitvinding wiel'], ans:1, exp:'Schrift rond 3000 v.Chr.'},
  {kind:'mc', t:'Wat is een polis?', opts:['Griekse stadstaat','Romeins legerkamp','Egyptische tempel','Germaanse stam'], ans:0, exp:'Polis = stadstaat.'},
  {kind:'open', t:'Leg â€œromaniseringâ€ uit.', check:/Romeins|taal|cultuur|recht|overname|verspreiding/i, exp:'Overname/verspreiding van Romeinse cultuur en recht.'},
  {kind:'mc', t:'Waardoor konden steden ontstaan?', opts:['Jacht','Voedseloverschotten','Migratie','Oorlog'], ans:1, exp:'Overschotten uit landbouw.'},
  {kind:'mc', t:'Wie horen bij Griekse filosofie?', opts:['Pericles, Caesar, Augustinus','Socrates, Plato, Aristoteles','Leonardo, Michelangelo, Rafael','Tacitus, Seneca, Nero'], ans:1, exp:'De drie klassieke denkers.'},
  {kind:'open', t:'Wat is het verschil tussen polyâ€‘ en monotheÃ¯sme?', check:/meerder|veel.*goden.*Ã©Ã©n|1.*god/i, exp:'Poly = meerdere goden; mono = Ã©Ã©n God.'},
  {kind:'mc', t:'Wat was de Pax Romana?', opts:['Vrede & welvaart','Burgeroorlog','Val van Rome','Religieuze strijd'], ans:0, exp:'Lange periode van rust â†’ handel en verspreiding.'},
  {kind:'mc', t:'Waarom leefden jagers-verzamelaars nomadisch?', opts:['Om handel te drijven','Ze volgden voedsel en dieren','Religieuze reden','Politiek systeem'], ans:1, exp:'Ze trokken achter voedsel aan.'},
  {kind:'open', t:'Keten: landbouw â†’ ______ â†’ steden (vul het sleutelwoord in).', check:/overschot|voedseloverschot/i, exp:'Landbouw â†’ overschot â†’ specialisatie â†’ steden.'},
  {kind:'mc', t:'Welke factor hielp de verspreiding van het christendom?', opts:['Pax Romana & wegen','Feodalisme','Kruistochten','Vikingen'], ans:0, exp:'Rust en wegen in het rijk.'}
];
let fi=0, fscore=0; const fC=document.getElementById('qfinal'); const fFb=document.getElementById('qfinal-feedback'); const fProg=document.getElementById('qfinal-progress'); const fSum=document.getElementById('final-summary');
function renderFinal(){ const q=finalBank[fi]; if(q.kind==='open'){renderOpen(fC,q.t)} else {renderMC(fC,q.t,q.opts); [...fC.querySelectorAll('button[data-i]')].forEach(b=>b.onclick=()=>{ fC.dataset.choice=b.dataset.i; [...fC.querySelectorAll('button[data-i]')].forEach(x=>x.classList.toggle('primary',x===b)); }); } fFb.classList.add('hidden'); fProg.textContent=`Vraag ${fi+1} / ${finalBank.length} Â· Score ${fscore}`; }
renderFinal();
document.getElementById('qfinal-check').onclick=()=>{ const q=finalBank[fi]; let ok=false; if(q.kind==='open'){ ok = checkOpen(q.check); } else { ok = Number(fC.dataset.choice)==q.ans; }
  if(ok) fscore++; fFb.className='card '+(ok?'ok':'bad'); fFb.textContent=(ok?'âœ… Goed! ':'âŒ Bijnaâ€¦ ')+q.exp; fFb.classList.remove('hidden'); fProg.textContent=`Vraag ${fi+1} / ${finalBank.length} Â· Score ${fscore}`; };
document.getElementById('qfinal-next').onclick=()=>{ if(fi<finalBank.length-1){ fi++; delete fC.dataset.choice; renderFinal(); } else { const pct=Math.round((fscore/finalBank.length)*100); fSum.classList.remove('hidden'); fSum.innerHTML = `<h3>Resultaat</h3><p>Score: <b>${fscore}/${finalBank.length}</b> (${pct}%).</p><p>${pct>=70?'ğŸ‰ Knap! Je beheerst de stof. Herhaal je fout gemaakte vragen.':'ğŸ” Bijna! Herhaal de onderdelen waar je foutjes maakte en probeer opnieuw.'}</p>`; }};

// ---------- gating door stappen ----------
function enableNext(id){ document.getElementById(id).removeAttribute('disabled'); }
// quiz gating: haal min 4/6 (T1), 5/8 (T2), 5/8 (mix)
function pass(score,total){ return score/total >= 0.66 }

// observe scores to unlock next button
const observer = new MutationObserver(()=>{
  if(q1i===q1Bank.length-1) enableNext('next-quiz1');
  if(q2i===q2Bank.length-1) enableNext('next-quiz2');
  if(mixI===mixBank.length-1) enableNext('next-mix');
});
observer.observe(document.body,{subtree:true,childList:true,attributes:true});

// default
showTab('overview');
</script>
</body>
</html>
